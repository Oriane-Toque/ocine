<!DOCTYPE html>
<html lang="fr">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta
		name="viewport" content="width=device-width, initial-scale=1">

		<!-- Favicon -->
		<link rel="icon" href="{{ asset("/img/ocine.ico") }}"/>

		<link
		rel="stylesheet" href="{{ asset("/css/style.css") }}">
		<!-- Bootstrap CSS -->
		<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

		<!-- Font Awesome icons -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet"/>
		<title>
			{% block title %}{% endblock %}
		</title>
	</head>
	<body>

		<header>
			<nav id="header-nav" class="navbar navbar-expand-lg navbar-dark bg-dark p-3">
				<div class="container-fluid">
					<a id="logo" class="navbar-brand" href="{{ path("movie_list") }}">O'Ciné</a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse header-nav_content" id="navbarSupportedContent">
						<ul class="navbar-nav me-auto mb-2 mb-lg-0">
							<li class="nav-item">
								<a class="nav-link {% block menuMovie %}{% endblock %}" aria-current="page" href="{{ path("movie_list") }}">Movies</a>
							</li>

						</ul>
						<div class="connect">
							{% if is_granted('IS_AUTHENTICATED_FULLY') %}
								{% dump app.user.roles %}
									<div class="connect-badge">
										{% if is_granted('ROLE_ADMIN') %}
											Administrateur :
										{% elseif is_granted('ROLE_MANAGER') %}
											Manager :
										{% elseif is_granted('ROLE_USER') %}
											Utilisateur :
										{% endif %}
										{{ app.user.email }}
									</div>
									<a class="btn-logout" href="{{ path('app_logout') }}">Déconnexion</a>

							{% else %}

								{# Non connecté #}
								<div class="connect-badge">Visiteur</div>
								<a class="btn-login" href="{{ path('app_login') }}">Connexion</a>

							{% endif %}						
						</div>
					</div>
				</div>
			</nav>
			{# Sous-nav optionnelle #}
			{% block subNav %}{% endblock %}
		</header>

		<main>
			<div class="container"> {% block body %}{% endblock %}
				</div>
			</main>


			<!-- Option 1: Bootstrap Bundle with Popper -->
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
		</body>
	</html>
